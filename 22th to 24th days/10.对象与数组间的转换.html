<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>对象与数组间的转换</title>
</head>
<body>
	<script type="text/javascript">
		// 对象转换为数组
		var scoreObject = {
    "Tony": {
        "Math": 95,
        "English": 79,
        "Music": 68
    },
    "Simon": {
        "Math": 100,
        "English": 95,
        "Music": 98
    },
    "Annie": {
        "Math": 54,
        "English": 65,
        "Music": 88
    }
}
function objectToArray(object) {
var arr = [], arr1 = [], arr2 = [], arr3 = [];
var k = 0;
for(var key in object) {
	arr2[k] = [];
	arr1.push(object[key]);
	arr2[k].push(key);
	k = k+1;
}
var arr3 = arr1.map(item => {
  return Object.values(item);
})

for(var i = 0; i < arr1.length; i++) {
	arr[i] = arr2[i].concat(arr3[i]);
}
return arr;
}
var scoreArray = objectToArray(scoreObject);
console.log(scoreArray);
// 数组转换为对象
var menuArr = [
    [1, "Area1", -1],
    [2, "Area2", -1],
    [3, "Area1-1", 1],
    [4, "Area1-2", 1],
    [5, "Area2-1", 2],
    [6, "Area2-2", 2],
    [7, "Area1-2-3", 4],
    [8, "Area2-2-1", 6],
];
// 这方法是参考的别人的，但实在想不到更好的方法
// 代码来自 https://github.com/yeung66/ife-basic/blob/master/basic22-24/sort.html
function menuObject(arr) {
            let obj = {0: {}};
            for (let i = 0, len = arr.length; i < len; i++) {
                obj[arr[i][0]] = {name: arr[i][1]};
                if (arr[i][2] < 0) {
                    obj[0][arr[i][0]] = obj[arr[i][0]];
                } else {
                    obj[arr[i][2]].subMenu = obj[arr[i][2]].subMenu || {};
                    obj[arr[i][2]].subMenu[arr[i][0]] = obj[arr[i][0]];
                }
            }
            return obj[0];
        }
        console.log(menuObject(menuArr));
	</script>
</body>
</html>
