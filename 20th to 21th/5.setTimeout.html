<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>setTimeout</title>
</head>
<body>
	<div id="fade-obj" style="width:300px;height:300px;background:#000;opacity: 1;"></div>
    <button id="fade-btn">淡出</button>
    <script type="text/javascript">
    	var fadeBtn = document.getElementById('fade-btn');
    	var fadeObj = document.getElementById('fade-obj');
    	fadeBtn.onclick = function() {
    		fadeBtn.disabled = true;
            if (fadeBtn.innerHTML === '淡出') {
                 setTimeout(fadeOut, 20);
             }
            else {
                 setTimeout(fadeIn, 20);
            }
    		function fadeOut() {
    			var str = fadeObj.style.opacity;
    			str = (Number(str) - 0.01).toString();
                fadeObj.style.opacity = str;
                if (Number(fadeObj.style.opacity) > 0) {
                    var t = setTimeout(fadeOut, 20);
                }
                else if (Number(fadeObj.style.opacity) === 0) {
                    fadeBtn.innerHTML = '淡入';
                    fadeBtn.disabled = false;
                }
            }
            function fadeIn() {
                var str = fadeObj.style.opacity;
                str = (Number(str) + 0.01).toString();
                fadeObj.style.opacity = str;
                if (Number(fadeObj.style.opacity) < 1) {
                    var t = setTimeout(fadeIn, 20);
                }
                else if (Number(fadeObj.style.opacity) === 1) {
                    fadeBtn.innerHTML = '淡出';
                    fadeBtn.disabled = false;
                }
            }
    	}
    </script>
</body>
</html>